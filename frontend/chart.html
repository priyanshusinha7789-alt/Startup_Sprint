<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sales Chart</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-gray-100 font-sans p-6">
<h1 class="text-3xl font-bold mb-6">Sales Chart</h1>
<div class="bg-white p-6 rounded shadow">
  <canvas id="chart"></canvas>
</div>

<script>
async function loadChart(){
  const res = await fetch("http://localhost:3000/sales");
  const data = await res.json();

  const itemCount = {};
  data.forEach(bill => {
    itemCount[bill.item]=(itemCount[bill.item]||0)+bill.qty;
  });

  const ctx = document.getElementById("chart").getContext("2d");
  new Chart(ctx,{
    type:"bar",
    data:{
      labels:Object.keys(itemCount),
      datasets:[{
        label:"Quantity Sold",
        data:Object.values(itemCount),
        backgroundColor:"rgba(34,197,94,0.7)",
        borderColor:"rgba(34,197,94,1)",
        borderWidth:1
      }]
    },
    options:{responsive:true, scales:{y:{beginAtZero:true}}}
  });
}

loadChart();
</script>
</body>
</html>
